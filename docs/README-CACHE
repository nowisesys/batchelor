
    ** System cache **


Cache is configured in config/defaults.app. By default the cache is using 
files, but can be configured with i.e. apcu.

** Single type cache:

    The config entry is on this form, were the options array are passed as is to 
    cache constructor for type xxx:

        'cache' => [
            'type'    => 'xxx',
            'options' => [ ... ]
        ]

    Example:

        'cache' => [
            'type'    => 'apcu',
            'options' => [
                'prefix'    => 'batchelor',
                'lifetime'  => 7200
            ]
        ]

    Valid type options are: 

        o) file      - Use file system.
        o) memory    - Use RAM memory
        o) shmop     - Use shared memory
        o) xcache    - Use the xcache extension
        o) apcu      - Use the APCu extension
        o) redis     - Use Redis server (single, cluster or array)
        o) memcached - Use memcached server

    For options, see classes under Batchelor\Cache\Backend under source. 

** Stacked cache:

    Theres also a special stacked cache that creates a priority queue of configured 
    cache classes using each lifetime options as the priority (reversed). When caching
    an entry with i.e. lifetime 3600 it is written to all backends.

    When reading entries, each cache object in the priority queue is checked top to
    bottom for an existing value. If found, it is then populated up in the queue to
    fill missing entries in cache objects with higher priority.

    The stacked backend is configured from the same place as single instance
    backend, but uses the backends array:

        'cache' => [
            'type'    => 'stacked',
            'options' => [
                'prefix'    => 'batchelor',
                'lifetime'  => 7200
            ],
            'backends' => [
                'file' => [ ... ],      // Options for file backend.
                'apcu' => [ ... ],      // Options for APCu backend.
            ]
        ]

    The priority between backends is automatic, with backends with lowest lifetime
    first in the pipeline. Two shortcut modes are also possible if options are not
    required for backends:

        'cache' => [
            'type'    => 'stacked',
            'backends' => [
                'file' => true,
                'apcu' => true
            ]
        ]

    Use simple array of backend names:

        'cache' => [
            'type'    => 'stacked',
            'backends' => [
                'file', 'apcu'
            ]
        ]

** Recommendations:

    The stacked cache is suitable for implementing an "eventual in sync" cache. For
    most installations its sufficient with i.e. using redis. If running on a single
    server, use apcu or redis as backend.

** Service:

    The configured cache is available as a service named cache. It's injected as a
    property into classes deriving from the component class.

// Anders LÃ¶vgren, 2018-09-01
